~/.config/nvim/lua/sumod/plugins/debug_Langs/debug_JavaScript.lua

return {
	{
		"mfussenegger/nvim-dap",
		dependencies = {
			"rcarriga/nvim-dap-ui",
			"theHamsta/nvim-dap-virtual-text",
			"nvim-neotest/nvim-nio",
			"williamboman/mason.nvim",
			"mxsdev/nvim-dap-vscode-js", -- Add this for JavaScript debugging
		},
		config = function()
			local dap = require("dap")
			local dapui = require("dapui")

			require("dapui").setup()
			require("nvim-dap-virtual-text").setup()

			-- JavaScript/Node.js Debugging Setup
			require("dap-vscode-js").setup({
				-- node_path = "node", -- defaults to $NODE_PATH or finds node in PATH
				debugger_path = vim.fn.stdpath("data") .. "/mason/packages/js-debug-adapter", 
				adapters = { 'pwa-node', 'pwa-chrome', 'pwa-msedge', 'node-terminal', 'pwa-extensionHost' },
			})

			-- Node.js Debug Configurations
			dap.configurations.javascript = {
				{
					type = "pwa-node",
					request = "launch",
					name = "Launch file",
					program = "${file}",
					cwd = "${workspaceFolder}",
					runtimeExecutable = "node",
				},
				{
					type = "pwa-node",
					request = "attach",
					name = "Attach to process",
					processId = require('dap.utils').pick_process,
					cwd = "${workspaceFolder}",
				},
				{
					type = "pwa-node",
					request = "launch",
					name = "Debug Current File",
					program = "${file}",
					cwd = "${workspaceFolder}",
					runtimeExecutable = "node",
					sourceMaps = true,
					skipFiles = {"<node_internals>/**"},
				},
			}

			-- TypeScript configurations (if you work with TS)
			dap.configurations.typescript = {
				{
					type = "pwa-node",
					request = "launch",
					name = "Debug TypeScript File",
					program = "${file}",
					cwd = "${workspaceFolder}",
					runtimeExecutable = "node",
					runtimeArgs = {
						"-r",
						"ts-node/register",
					},
					env = {
						TS_NODE_PROJECT = "tsconfig.json",
					},
					sourceMaps = true,
					skipFiles = {"<node_internals>/**"},
				},
			}

			-- node-gtk specific configuration (if you're using node-gtk)
			dap.configurations.javascriptreact = dap.configurations.javascript
			dap.configurations.typescriptreact = dap.configurations.typescript

			-- For GTK applications, you might need additional setup
			local function setup_node_gtk_debugging()
				dap.configurations.javascript = vim.tbl_extend("force", dap.configurations.javascript, {
					{
						type = "pwa-node",
						request = "launch",
						name = "Launch node-gtk App",
						program = "${file}",
						cwd = "${workspaceFolder}",
						runtimeExecutable = "node",
						env = {
							GI_TYPELIB_PATH = "/usr/lib/girepository-1.0", -- Adjust path if needed
							LD_LIBRARY_PATH = "/usr/lib", -- Adjust if node-gtk is installed elsewhere
						},
						args = {},
						sourceMaps = true,
					},
				})
			end

			-- Check if node-gtk might be available and setup accordingly
			setup_node_gtk_debugging()


		end,
	},


}